<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script type="text/javascript" src="/socketcluster.js"></script>
  </head>
  <body>
    <div class="content">
      <img src="img/logo.png" alt="SocketCluster logo">
      <p>
        Thank you for installing SocketCluster <span id="face-container">:)</span><br />
        For documentation, go to <a href="http://socketcluster.io/">http://socketcluster.io/</a>
      </p>
      <p>
        <br />
        <iframe src="https://ghbtns.com/github-btn.html?user=topcloud&repo=socketcluster&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
      </p>
    </div>
    <script type="text/javascript">
      // Initiate the connection to the server
      var socket = socketCluster.connect();
      
      socket.on('error', function (err) {
        throw 'Socket error - ' + err;
      });
      
      socket.on('connect', function () {
        console.log('CONNECTED');
      });
      
      var faces = [';p', ':D', ':)', ':3', ';)'];
      var faceContainer = document.getElementById('face-container');
      
      socket.on('rand', function (data) {
        var face = faces[data.rand];
        console.log('RANDOM:', data.rand, face);
        faceContainer.innerHTML = face;
      });
      
      var pongChannel = socket.subscribe('pong');
      
      pongChannel.on('subscribeFail', function (err) {
        console.log('Failed to subscribe to PONG channel due to error: ' + err);
      });
      
      pongChannel.watch(function (num) {
        console.log('PONG:', num);
      });
    </script>
  </body>
</html>